# vite处理跨域

- 同源策略(浏览器规则) http默认交互只能在童鞋一同域名同端口的两台终端进行
- 跨域：当不满足同源策略的两源发送请求，就会产生跨域，跨域请求默认请求情况下会被浏览器拦截，除非请求的服务器出具标记
- 跨域限制是服务器已经响应，但是浏览器限制不给你
- 发送请求是不会拦截的，只有响应的时候才会拦截

- 解决方法
   ```js
    server:{//开发服务器配置
    proxy:{//配置跨域
      "/api":{//key+描述对象，以后遇到/api开头的请求，都将代理到target属性对应的域中去
        target:'https://www.360.com',
        changeOrigin:true,
        rewrite:(path)=>path.replace(/^\/api/,'')//是否要重写api路径，将api替换为空串
      }
    }
  },
  ```

- 原理:
  1. http://127.0.0.1:5174/api 浏览器拼接完后找vite
  2. vite发现这个path又配置过跨域代理策略，然后他会根据策略的描述对象再次进行请求https://www.360.com
  (本来要请求360-》会被浏览器拒绝，所以先请求自己的服务器，然后自己的服务器去请求360服务器)


- 开发时态：一般利用构建工具或者脚手架后者第三方proxy代理配置
- 生产环境一般交给后端处理跨域：
    - ngnix:代理服务：和本地开发vite原理一样的
    - 配置身份标记:Access-Control-Allow-Origin 